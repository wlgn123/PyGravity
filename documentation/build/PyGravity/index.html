<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PyGravity Documentation &mdash; PyGravity 1.01 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.01',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="PyGravity 1.01 documentation" href="#" />
    <link rel="next" title="Class Definitions" href="Class_Definitions.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Class_Definitions.html" title="Class Definitions"
             accesskey="N">next</a> |</li>
        <li><a href="#">PyGravity 1.01 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pygravity-documentation">
<h1>PyGravity  Documentation<a class="headerlink" href="#pygravity-documentation" title="Permalink to this headline">¶</a></h1>
<p>Class and method docs:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Class_Definitions.html">Class Definitions</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Class_Definitions.html#pygravity">PyGravity</a></li>
<li class="toctree-l1"><a class="reference internal" href="Class_Definitions.html#physics">Physics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Class_Definitions.html#particles">Particles</a></li>
<li class="toctree-l1"><a class="reference internal" href="Class_Definitions.html#data-input-ouptut">Data Input Ouptut</a></li>
<li class="toctree-l1"><a class="reference internal" href="Class_Definitions.html#vectors">Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">PyGravity  ToDo List</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="todo.html#todo">ToDo</a></li>
</ul>
</div>
<p>full source <a class="reference external" href="http://github.com/russloewe/PyGravity">http://github.com/russloewe/PyGravity</a></p>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>
<div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Start by downloading the PyGravity source:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone http://github.com/russloewe/PyGravity
</pre></div>
</div>
<p>Then enter the PyGravity directory and run the build script:</p>
<div class="highlight-python"><div class="highlight"><pre>cd PyGravity
./build.sh -i -t
</pre></div>
</div>
<p>the -i option will build and install the PyGravity module and the
-t option will run unittests. For my info on the build commands
type:</p>
<div class="highlight-python"><div class="highlight"><pre>./build.sh -h
</pre></div>
</div>
<p>The build script also checks returns values and will fail and print an error
if one of the build steps or tests fails.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The unittests will run after the install against the installed PyGRavity
module and not the local source. Therefore if the unittests pass you should be
good to go. However if you change the source you&#8217;ll need to reinstall for
the unittests to check your work.</p>
</div>
</div>
<div class="section" id="using-the-physics-library">
<h1>Using the Physics Library<a class="headerlink" href="#using-the-physics-library" title="Permalink to this headline">¶</a></h1>
<p>PyGravity&#8217;s particle submodule can be used directly along with the physics functions
without the need to invoke the simulator. For instance if we want to know the force of
gravity between two particles that are each a kilogram in weight and are positioned 10
meters apart, we can first use the Particle module to created two particle objects:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">PyGravity</span> <span class="kn">import</span> <span class="n">Particle</span><span class="p">,</span> <span class="n">Vector</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we can use the Physics module to calclate the force of gravity between the
two objects:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">PyGravity</span> <span class="kn">import</span> <span class="n">Physics</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Physics</span><span class="o">.</span><span class="n">Grav_Force</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span>
<span class="go">(6.67384e-13)</span>
</pre></div>
</div>
<p>The answer is a 1D vector and the units are in Newtons. A 1D setup is
appropiate here because we were only looking for the force between two
objects, which reside on a line.</p>
<p>For a 2D scenarior we can create three particles which will form a triangle
on  plane:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Now to find the total force acting on a particle we can call Total_Grav_Force.
This function takes a list of particles and iterates through them summing all the
different froce vectors acting on one particle. So to find the total force
acting on Particle A:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Physics</span><span class="o">.</span><span class="n">Total_Grav_Force</span><span class="p">([</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">],</span> <span class="n">A</span><span class="p">)</span>
<span class="go">[-9.03339876028e-13,-2.35955876028e-13]</span>
</pre></div>
</div>
<p>We can also find the acceleration acting on an object with the Grav_Accel,
and accompaining Sum_Grav_Accel method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Physics</span><span class="o">.</span><span class="n">Sum_Grav_Accel</span><span class="p">([</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">],</span> <span class="n">A</span><span class="p">)</span>
<span class="go">[9.03339876028e-13,2.35955876028e-13]</span>
</pre></div>
</div>
<p>This is the acceleration vector acting on A. The Grav_Accel function works
just like the Grav_Force function but takes a math shortcut to find the
acceleration instead of having to find the force then divide by the mass.</p>
</div>
<div class="section" id="simple-example">
<h1>Simple Example<a class="headerlink" href="#simple-example" title="Permalink to this headline">¶</a></h1>
<p>To start using :python:func:&#8217;PyGravity&#8217;, we begin be importing the module and declaring a base
instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">PyGravity</span> <span class="kn">as</span> <span class="nn">pg</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">PyGravity</span><span class="p">()</span>
</pre></div>
</div>
<p>Now taking an example data file from the example directory in the source:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">base</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s">&#39;example_data.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>From there we can run one of the built in simulators. Either the Euler method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">base</span><span class="o">.</span><span class="n">step_all</span><span class="p">()</span>
</pre></div>
</div>
<p>or the Verlet Velocity method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">step_all_verlet</span><span class="p">()</span>
</pre></div>
</div>
<p>In small time steps the Verlet Method doesn&#8217;t offer much of an advantage. However,
with larger time steps the Verlet Method will conserver energy while the Euler
Method has a tendancy to send particles flying off in escape velocities in
situations that clearly violate conservation of energy.</p>
<p>To continue our simulation we can load the data files, set the time_interval and
run through the simulator loop. For example lets run through the simulation at a
step of one hour for a week, printing the position of every particle once a day:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyGavity</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">PyGravity</span><span class="p">()</span>
<span class="n">base</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s">&#39;some_data.xml&#39;</span><span class="p">)</span>
<span class="n">base</span><span class="o">.</span><span class="n">set_time_interval</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span> <span class="c"># an hour step</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="o">*</span><span class="mi">7</span><span class="p">):</span>
        <span class="c">#only print positions every day</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">24</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">:</span>
                        <span class="k">print</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">P</span>

        <span class="n">base</span><span class="o">.</span><span class="n">step_all</span><span class="p">()</span>
</pre></div>
</div>
<p>To double check if any particles are zipping out of the simulation just check run the escaping() function
from the Physics submodule once every iteration, or every day:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="o">*</span><span class="mi">7</span><span class="p">):</span>
        <span class="c">#only print positions every day</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">24</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">:</span>
                        <span class="k">print</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">item</span><span class="o">.</span><span class="n">P</span>

                <span class="c">#exit if a particle is escaping from the system and list it</span>
                <span class="k">if</span> <span class="n">Physics</span><span class="o">.</span><span class="n">escaping</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">)</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="k">print</span> <span class="n">Physics</span><span class="o">.</span><span class="n">escaping</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">)</span>
                        <span class="k">break</span>

        <span class="n">base</span><span class="o">.</span><span class="n">step_all</span><span class="p">()</span>

        <span class="c"># here also works for escape checks, but might cause unneeded lag</span>
</pre></div>
</div>
</div>
<div class="section" id="simple-example-with-graphing">
<h1>Simple Example with Graphing<a class="headerlink" href="#simple-example-with-graphing" title="Permalink to this headline">¶</a></h1>
<p>We can easly take our above 2D example and graph the results with Matplotlib.
Just add the particles&#8217; positions on each step or sub-step:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">PyGravity</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">PyGravity</span><span class="o">.</span><span class="n">PyGravity</span><span class="p">()</span>    <span class="c"># start by making base instance</span>
<span class="n">base</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s">&#39;example_data.csv&#39;</span><span class="p">)</span>
<span class="n">base</span><span class="o">.</span><span class="n">set_time_interval</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">ay</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">bx</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">by</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">cx</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">cy</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">dx</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">dy</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200000</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">200</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c">#some print statements to watch while the simulator runs</span>
                <span class="k">print</span> <span class="n">i</span>
                <span class="k">print</span> <span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">P</span>

                <span class="c">#plot all the postions</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">ay</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">bx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">by</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">cx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">cy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">dx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">dy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

                <span class="c">#Stop when a particle starts escaping the system</span>
                <span class="k">if</span> <span class="n">PyGravity</span><span class="o">.</span><span class="n">Physics</span><span class="o">.</span><span class="n">escaping</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">)</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="k">print</span> <span class="n">PyGravity</span><span class="o">.</span><span class="n">Physics</span><span class="o">.</span><span class="n">escaping</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">)</span>
                        <span class="k">break</span>

        <span class="n">base</span><span class="o">.</span><span class="n">step_all</span><span class="p">()</span>

<span class="k">print</span> <span class="s">&#39;Time: &#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">currant_time</span><span class="p">),</span> <span class="s">&#39;mins&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Generates the image</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/simple_2d.png"><img alt="_images/simple_2d.png" src="_images/simple_2d.png" style="width: 568.4px; height: 428.4px;" /></a>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">I have no idea what I did , but the current &#8220;example_data.csv&#8221;
and 2D_Physics.py files in the exmples folder will not reproduce the
above results. I accidentally scrapped the right data/config to make that
image.</p>
</div>
<p>Be careful with the time_interval setting. Too big of a step will
make it appear that the particles are escaping when in  reality they
are just suffering from Euler&#8217;s Method. The Verlet Method should
fix this.</p>
</div>
<div class="section" id="d-example">
<h1>3D Example<a class="headerlink" href="#d-example" title="Permalink to this headline">¶</a></h1>
<p>For a 3D example let&#8217;s graph the orbit of the Moon around the Earth. The
Earth weighs 5.972e24 kg and the Moon weighs 7.3477e22 kg. According to
NASA the moon has a semi-major axis of 0.3844e6 Km or .3866e9 meters.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We need to convert to meters because the value of G in the
simulator uses meters and kilograms, i.e. the standard metric value
of G</p>
</div>
<p>NASA <a class="footnote-reference" href="#moon-orbit" id="id1">[1]</a> provides information for the Perigee and Apogee of the Moon and
the respective velocities, it is not as easy to find the volecity vector
of a planet on an ellipse as it is to find the velocity vector for a
planet on a circle. So, for this simulation let&#8217;s pick the orbit radius
as the semi-major axis (0.3844e6 Km), and the velocity using an online
circular orbit calculator <a class="footnote-reference" href="#circ" id="id2">[2]</a> to give 1.018159e3 m/s. This way the
velocity is the tangent vector to the orbit.</p>
<p>Now, using XML, we have the datafile: earth_moon.xml:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;data&gt;

        &lt;particle&gt;
                &lt;name&gt;Earth&lt;/name&gt;
                &lt;position&gt;0;0;0&lt;/position&gt;
                &lt;velocity&gt;0;0;0&lt;/velocity&gt;
                &lt;mass&gt;5.972e24&lt;/mass&gt;
        &lt;/particle&gt;

        &lt;particle&gt;
                &lt;name&gt;Moon&lt;/name&gt;
                &lt;position&gt;0.3844e9;0;0&lt;/position&gt;
                &lt;velocity&gt;0;1.018159e3;0&lt;/velocity&gt;
                &lt;mass&gt;7.3477e22&lt;/mass&gt;
        &lt;/particle&gt;

&lt;/data&gt;
</pre></div>
</div>
<p>Using our PyGravity, along with Matplotlib, we can load this file and
run through the simulator simular to the 2D example above, except this
time using pretty much a slighlty modified Matplotlib 3D line
<a class="footnote-reference" href="#d" id="id3">[3]</a> example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">PyGravity</span>

<span class="c">#PyGravity stuff</span>
<span class="n">base</span> <span class="o">=</span> <span class="n">PyGravity</span><span class="o">.</span><span class="n">PyGravity</span><span class="p">()</span>    <span class="c"># start by making base instance</span>
<span class="n">base</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s">&#39;earth_moon.xml&#39;</span><span class="p">)</span>
<span class="n">base</span><span class="o">.</span><span class="n">set_time_interval</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">base</span><span class="o">.</span><span class="n">set_fast</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="c">#Plotting stuff</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;legend.fontsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">gca</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s">&#39;3d&#39;</span><span class="p">)</span>
<span class="n">Ax</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Ay</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Az</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Bx</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">By</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">Bz</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">one_hour</span> <span class="o">=</span> <span class="mi">60</span><span class="o">*</span><span class="mi">60</span>
<span class="n">one_day</span> <span class="o">=</span> <span class="n">one_hour</span><span class="o">*</span> <span class="mi">24</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">one_day</span> <span class="o">*</span> <span class="mi">27</span> <span class="p">):</span>
        <span class="c"># Show what day the simulator is on</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="n">one_day</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&#39;Day: &#39;</span><span class="p">,</span> <span class="n">i</span><span class="o">/</span><span class="n">one_day</span>

        <span class="c">#plot a point for every hour</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="n">one_hour</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">Ax</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="n">Ay</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">Az</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="n">Bx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="n">By</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">Bz</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>

                <span class="k">if</span> <span class="n">PyGravity</span><span class="o">.</span><span class="n">Physics</span><span class="o">.</span><span class="n">escaping</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">)</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="k">print</span> <span class="s">&#39;escaping&#39;</span><span class="p">,</span><span class="n">PyGravity</span><span class="o">.</span><span class="n">Physics</span><span class="o">.</span><span class="n">escaping</span><span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">particle_list</span><span class="p">)</span>
                        <span class="k">break</span>
        <span class="n">base</span><span class="o">.</span><span class="n">step_all</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;Time: &#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">currant_time</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="p">),</span> <span class="s">&#39;hrs&#39;</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Ax</span><span class="p">,</span> <span class="n">Ay</span><span class="p">,</span> <span class="n">Az</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Earth&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">Bx</span><span class="p">,</span> <span class="n">By</span><span class="p">,</span> <span class="n">Bz</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Moon&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>This will generate the plot:</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/earth_moon.png"><img alt="_images/earth_moon.png" src="_images/earth_moon.png" style="width: 568.4px; height: 428.4px;" /></a>
</div></blockquote>
<p>Note the slight movement of the Earth from the Moon&#8217;s pull and the
slight overlap on the Moon&#8217;s orbit because of orbi procession. Also note
that there is an overlap in the orbit after 27 days, where as the real
Moon takes 27.3 days to complete a full orbit <a class="footnote-reference" href="#moon-orbit" id="id4">[1]</a></p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="moon-orbit" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id4">2</a>)</em> <a class="reference external" href="http://nssdc.gsfc.nasa.gov/planetary/factsheet/moonfact.html">http://nssdc.gsfc.nasa.gov/planetary/factsheet/moonfact.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="circ" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="http://orbitsimulator.com/formulas/vcirc.html">http://orbitsimulator.com/formulas/vcirc.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="d" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><a class="reference external" href="http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html#line-plots">http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html#line-plots</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="issues">
<h1>Issues<a class="headerlink" href="#issues" title="Permalink to this headline">¶</a></h1>
<p>For bugs and issues please use the Gitbhub page at
<a class="reference external" href="https://github.com/russloewe/PyGravity">https://github.com/russloewe/PyGravity</a>
or contact me directly at <a class="reference external" href="mailto:russloewe&#37;&#52;&#48;gmail&#46;com">russloewe<span>&#64;</span>gmail<span>&#46;</span>com</a> .</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PyGravity  Documentation</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#using-the-physics-library">Using the Physics Library</a></li>
<li><a class="reference internal" href="#simple-example">Simple Example</a></li>
<li><a class="reference internal" href="#simple-example-with-graphing">Simple Example with Graphing</a></li>
<li><a class="reference internal" href="#d-example">3D Example</a></li>
<li><a class="reference internal" href="#issues">Issues</a></li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="Class_Definitions.html"
                        title="next chapter">Class Definitions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Class_Definitions.html" title="Class Definitions"
             >next</a> |</li>
        <li><a href="#">PyGravity 1.01 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Russell Loewe.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>